import { useState } from "react";
import { SVGProps } from "react";

export function Paiementenagence(props: SVGProps<SVGSVGElement>) {
  return (
    <svg
      {...props}
      xmlns="http://www.w3.org/2000/svg"
      width={20}
      height={20}
      viewBox="0 0 20 20"
      fill="none"
    >
      <path
        fillRule="evenodd"
        clipRule="evenodd"
        d="M14.1673 1.66699C14.6093 1.66699 15.0331 1.84271 15.3457 2.15527C15.6583 2.46783 15.834 2.89163 15.834 3.33366V16.667C16.055 16.667 16.2669 16.7549 16.4232 16.9111C16.5795 17.0674 16.6673 17.2793 16.6673 17.5003C16.6673 17.7213 16.5795 17.9332 16.4232 18.0895C16.2669 18.2458 16.055 18.3337 15.834 18.3337H4.16732C3.9463 18.3337 3.73441 18.2458 3.57812 18.0895C3.42184 17.9332 3.33398 17.7213 3.33398 17.5003C3.33398 17.2793 3.42184 17.0674 3.57812 16.9111C3.73441 16.7549 3.9463 16.667 4.16732 16.667V3.33366C4.16732 2.89163 4.34304 2.46783 4.6556 2.15527C4.96816 1.84271 5.39196 1.66699 5.83398 1.66699H14.1673ZM9.16732 10.8337C8.9463 10.8337 8.73441 10.9215 8.57812 11.0778C8.42184 11.2341 8.33398 11.446 8.33398 11.667V16.667H11.6673V11.667C11.6673 11.446 11.5795 11.2341 11.4232 11.0778C11.2669 10.9215 11.055 10.8337 10.834 10.8337H9.16732ZM8.33398 7.50033C8.11297 7.50033 7.90107 7.58819 7.74479 7.74447C7.58851 7.90075 7.50065 8.11265 7.50065 8.33366C7.50065 8.55467 7.58851 8.76657 7.74479 8.92285C7.90107 9.07913 8.11297 9.16699 8.33398 9.16699C8.555 9.16699 8.7669 9.07913 8.92318 8.92285C9.07946 8.76657 9.16732 8.55467 9.16732 8.33366C9.16732 8.11265 9.07946 7.90075 8.92318 7.74447C8.7669 7.58819 8.555 7.50033 8.33398 7.50033ZM11.6673 7.50033C11.4463 7.50033 11.2344 7.58819 11.0781 7.74447C10.9218 7.90075 10.834 8.11265 10.834 8.33366C10.834 8.55467 10.9218 8.76657 11.0781 8.92285C11.2344 9.07913 11.4463 9.16699 11.6673 9.16699C11.8883 9.16699 12.1002 9.07913 12.2565 8.92285C12.4128 8.76657 12.5007 8.55467 12.5007 8.33366C12.5007 8.11265 12.4128 7.90075 12.2565 7.74447C12.1002 7.58819 11.8883 7.50033 11.6673 7.50033ZM8.33398 5.00033C8.11297 5.00033 7.90107 5.08819 7.74479 5.24447C7.58851 5.40075 7.50065 5.61264 7.50065 5.83366C7.50065 6.05467 7.58851 6.26657 7.74479 6.42285C7.90107 6.57913 8.11297 6.66699 8.33398 6.66699C8.555 6.66699 8.7669 6.57913 8.92318 6.42285C9.07946 6.26657 9.16732 6.05467 9.16732 5.83366C9.16732 5.61264 9.07946 5.40075 8.92318 5.24447C8.7669 5.08819 8.555 5.00033 8.33398 5.00033ZM11.6673 5.00033C11.4463 5.00033 11.2344 5.08819 11.0781 5.24447C10.9218 5.40075 10.834 5.61264 10.834 5.83366C10.834 6.05467 10.9218 6.26657 11.0781 6.42285C11.2344 6.57913 11.4463 6.66699 11.6673 6.66699C11.8883 6.66699 12.1002 6.57913 12.2565 6.42285C12.4128 6.26657 12.5007 6.05467 12.5007 5.83366C12.5007 5.61264 12.4128 5.40075 12.2565 5.24447C12.1002 5.08819 11.8883 5.00033 11.6673 5.00033Z"
        fill="currentColor"
      />
    </svg>
  );
}
export function Virementbancaire(props: SVGProps<SVGSVGElement>) {
  return (
    <svg
      {...props}
      xmlns="http://www.w3.org/2000/svg"
      width={20}
      height={20}
      viewBox="0 0 20 20"
      fill="none"
    >
      <path
        d="M6.25065 9.54902C6.41482 9.54902 6.5775 9.58141 6.72917 9.64424C6.88086 9.7071 7.01836 9.79991 7.13444 9.91605L7.13363 9.91686C7.36769 10.1512 7.49982 10.4686 7.49984 10.7998C7.49984 11.1311 7.36771 11.4492 7.13363 11.6836L6.32227 12.4966H13.334C13.6655 12.4966 13.9834 12.6284 14.2178 12.8628C14.4522 13.0972 14.584 13.4151 14.584 13.7466C14.584 14.0781 14.4522 14.396 14.2178 14.6304C13.9834 14.8648 13.6655 14.9966 13.334 14.9966H6.32227L7.13444 15.808C7.36894 16.0425 7.50065 16.361 7.50065 16.6926C7.50061 17.0241 7.3689 17.3419 7.13444 17.5764C6.89995 17.8108 6.58224 17.9426 6.25065 17.9426C5.91906 17.9426 5.60135 17.8108 5.36686 17.5764L2.4209 14.6296C2.18658 14.3952 2.05469 14.0772 2.05469 13.7458C2.05478 13.4145 2.18665 13.0963 2.4209 12.862L5.36686 9.91605C5.48294 9.79991 5.62045 9.7071 5.77214 9.64424C5.9238 9.58141 6.08648 9.54902 6.25065 9.54902Z"
        fill="currentColor"
      />
      <path
        d="M13.6872 2.05146C13.996 2.03553 14.3 2.13478 14.54 2.32978L14.6344 2.41605L17.5804 5.36201C17.7991 5.58076 17.9291 5.8734 17.945 6.18232C17.9608 6.4912 17.8618 6.79524 17.6667 7.03519L17.5804 7.12959L14.6344 10.0764C14.4084 10.3057 14.1026 10.4397 13.7808 10.4491C13.459 10.4584 13.1457 10.3425 12.9067 10.1268C12.6679 9.91109 12.5209 9.61126 12.4974 9.29023C12.474 8.96919 12.5756 8.65139 12.7806 8.40319L12.8669 8.30797L13.679 7.49661H6.66732C6.34489 7.49884 6.03407 7.37635 5.7998 7.15482C5.56554 6.93308 5.42553 6.62902 5.40999 6.30684C5.3945 5.98466 5.50414 5.6687 5.71598 5.42549C5.92793 5.18225 6.22635 5.03024 6.54769 5.0015L6.66732 4.99661H13.679L12.8669 4.18444C12.7507 4.06836 12.6579 3.93006 12.5951 3.77835C12.5322 3.62669 12.4998 3.46399 12.4998 3.29984C12.4998 3.13566 12.5322 2.97299 12.5951 2.82132C12.6579 2.66961 12.7507 2.53213 12.8669 2.41605L12.8677 2.41686C13.0863 2.19805 13.3783 2.06747 13.6872 2.05146Z"
        fill="currentColor"
      />
    </svg>
  );
}
export function Cartebancaire(props: SVGProps<SVGSVGElement>) {
  return (
    <svg
      {...props}
      xmlns="http://www.w3.org/2000/svg"
      width={20}
      height={20}
      viewBox="0 0 20 20"
      fill="none"
    >
      <path
        fillRule="evenodd"
        clipRule="evenodd"
        d="M18.3327 14.1663C18.3327 14.8294 18.0691 15.4651 17.6003 15.9339C17.1314 16.4028 16.4957 16.6663 15.8327 16.6663H4.16602C3.50297 16.6663 2.86728 16.4028 2.39844 15.9339C1.9296 15.4651 1.66602 14.8294 1.66602 14.1663V8.33301H18.3327V14.1663ZM12.4993 11.6663C12.2783 11.6663 12.0664 11.7542 11.9102 11.9105C11.7539 12.0668 11.666 12.2787 11.666 12.4997C11.666 12.7207 11.7539 12.9326 11.9102 13.0889C12.0664 13.2451 12.2783 13.333 12.4993 13.333H14.9993C15.2204 13.333 15.4323 13.2451 15.5885 13.0889C15.7448 12.9326 15.8327 12.7207 15.8327 12.4997C15.8327 12.2787 15.7448 12.0668 15.5885 11.9105C15.4323 11.7542 15.2204 11.6663 14.9993 11.6663H12.4993Z"
        fill="currentColor"
      />
      <path
        d="M15.8327 3.33301C16.4957 3.33301 17.1314 3.59659 17.6003 4.06543C18.0691 4.53427 18.3327 5.16997 18.3327 5.83301V6.66634H1.66602V5.83301C1.66602 5.16997 1.9296 4.53427 2.39844 4.06543C2.86728 3.59659 3.50297 3.33301 4.16602 3.33301H15.8327Z"
        fill="currentColor"
      />
    </svg>
  );
}

type PaymentMethod = {
  id: string;
  label: string;
  description: string;
  icon: React.ReactNode;
  disabled?: boolean;
};

const paymentMethods: PaymentMethod[] = [
  {
    id: "Paiement en agence",
    label: "Paiement en agence",
    description: "Gérez votre assurance dans nos agences.",
    icon: <Paiementenagence className="shrink-0" />,
  },
  {
    id: "Virement bancaire",
    label: "Virement bancaire",
    description: "Effectuez le paiement par virement après validation.",
    icon: <Virementbancaire className="shrink-0" />,
  },
  {
    id: "Carte bancaire",
    label: "Carte bancaire",
    description: "Paiement immédiat et sécurisé par carte.",
    icon: <Cartebancaire className="shrink-0" />,
    disabled: true,
  },
];

type PaymentSelectorProps = {
  value?: string;
  onChange?: (id: string) => void;
};

export default function PaymentSelector({
  value,
  onChange,
}: PaymentSelectorProps) {
  const [internal, setInternal] = useState<string>("Paiement en agence");
  const active = value ?? internal;

  const setActive = (id: string) => {
    if (value === undefined) setInternal(id);
    onChange?.(id);
  };

  return (
    <ul className="grid grid-cols-3 gap-4">
      {paymentMethods.map((method) => {
        const isActive = active === method.id;
        const isDisabled = method.disabled;
        const isPaiementenagenceActive = method.id === "Paiement en agence";
        const isVirementbancaireActive = method.id === "Virement bancaire";

        return (
          <li
            key={method.id}
            className={`relative f-col gap-2 ${isDisabled ? "" : isActive ? "" : ""}`}
          >
            {isDisabled && (
              <span className="absolute top-0 right-0 py-2 px-3 bg-Sage-Gray-Low rounded-tr-2xl rounded-bl-2xl button-s">
                Bientôt disponible
              </span>
            )}
            <div
              onClick={() => !isDisabled && setActive(method.id)}
              className={`py-5 px-4 f-col gap-1 rounded-2xl border select-none transition
                ${
                  isDisabled
                    ? "cursor-not-allowed opacity-50"
                    : isActive
                      ? "cursor-default border-Neutral-BG-5 bg-Sage-Gray-Lower"
                      : "cursor-pointer border-transparent bg-Sage-Gray-Lowest hover:bg-Sage-Gray-Lower hover:border-Sage-Gray-Low"
                }`}
            >
              <div className="f-col gap-1.5">
                {method.icon}
                <span className="Button-M">{method.label}</span>
              </div>
              <p className="Text-S text-Sage-Gray-Higher">
                {method.description}
              </p>
            </div>
            {isPaiementenagenceActive && (
              <p className="text-Sage-Gray-Higher Text-S">
                Une référence vous sera communiquée après validation.
              </p>
            )}
            {isVirementbancaireActive && (
              <p className="text-Sage-Gray-Higher Text-S">
                Les coordonnées bancaires vous seront envoyées par email.
              </p>
            )}
          </li>
        );
      })}
    </ul>
  );
}
